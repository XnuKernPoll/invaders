fatal error: concurrent map iteration and map write

goroutine 21 [running]:
runtime.throw(0x4de46f, 0x26)
	/usr/lib/go-1.10/src/runtime/panic.go:619 +0x81 fp=0xc4200d3cd8 sp=0xc4200d3cb8 pc=0x427b21
runtime.mapiternext(0xc4200d3e50)
	/usr/lib/go-1.10/src/runtime/hashmap.go:747 +0x55c fp=0xc4200d3d68 sp=0xc4200d3cd8 pc=0x40843c
runtime.mapiterinit(0x4bc000, 0xc42009a360, 0xc4200d3e50)
	/usr/lib/go-1.10/src/runtime/hashmap.go:737 +0x1f1 fp=0xc4200d3d90 sp=0xc4200d3d68 pc=0x407df1
invasion/world.FilterAliens(0xc42009a360, 0xc4200d3f30, 0xc4200b00b2, 0x6, 0xc420011550)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:191 +0x7e fp=0xc4200d3ec0 sp=0xc4200d3d90 pc=0x49c52e
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x2, 0xc4200b00b2, 0x6, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:291 +0x1b2 fp=0xc4200d3fb0 sp=0xc4200d3ec0 pc=0x49cd72
runtime.goexit()
	/usr/lib/go-1.10/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc4200d3fb8 sp=0xc4200d3fb0 pc=0x450f61
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 1 [runnable]:
internal/poll.runtime_Semacquire(0xc4200aa05c)
	/usr/lib/go-1.10/src/runtime/sema.go:61 +0x39
internal/poll.(*fdMutex).rwlock(0xc4200aa050, 0x0, 0xc420067c00)
	/usr/lib/go-1.10/src/internal/poll/fd_mutex.go:152 +0xad
internal/poll.(*FD).writeLock(0xc4200aa050, 0xc4200fa040, 0x7)
	/usr/lib/go-1.10/src/internal/poll/fd_mutex.go:237 +0x32
internal/poll.(*FD).Write(0xc4200aa050, 0xc420112000, 0x2, 0x80, 0x0, 0x0, 0x0)
	/usr/lib/go-1.10/src/internal/poll/fd_unix.go:243 +0x46
os.(*File).write(0xc42000c018, 0xc420112000, 0x2, 0x80, 0xc4200e20a0, 0x76, 0xc4200fa000)
	/usr/lib/go-1.10/src/os/file_unix.go:243 +0x4e
os.(*File).Write(0xc42000c018, 0xc420112000, 0x2, 0x80, 0x8, 0xc4200e20a0, 0x0)
	/usr/lib/go-1.10/src/os/file.go:144 +0x6f
fmt.Fprintln(0x4ec320, 0xc42000c018, 0xc420067ec8, 0x1, 0x1, 0x4b3920, 0x0, 0xc4200e20a0)
	/usr/lib/go-1.10/src/fmt/print.go:255 +0x8b
fmt.Println(0xc420067ec8, 0x1, 0x1, 0xc4200e20a0, 0x7, 0xc4200b010b)
	/usr/lib/go-1.10/src/fmt/print.go:264 +0x57
invasion/world.(*Server).Handler(0xc420067f68)
	/home/sam/Programming/golang/src/invasion/world/server.go:17 +0x8f
main.main()
	/home/sam/Programming/golang/src/invasion/cmd/main.go:33 +0x118

goroutine 5 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 6 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 7 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 8 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 9 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 10 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 11 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 12 [chan send]:
invasion/world.(*Alien).Worker(0xc42009a390, 0xc420098360)
	/home/sam/Programming/golang/src/invasion/world/server.go:43 +0x46
created by invasion/world.(*Server).SpawnWorkers
	/home/sam/Programming/golang/src/invasion/world/server.go:62 +0xc6

goroutine 50 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0xc420051f00)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc420051f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x4, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 49 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0xc420052f00)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc420052f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x3, 0xc4200b00d3, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 16 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc420053778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x1, 0xc4200b009b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 34 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x1)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200ce778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x3, 0xc4200b00d3, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 58 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).Int63(0xc42000a060, 0xc42000a064)
	/usr/lib/go-1.10/src/math/rand/rand.go:377 +0x2d
math/rand.(*Rand).Int63(0xc42009a0f0, 0xc42000a064)
	/usr/lib/go-1.10/src/math/rand/rand.go:82 +0x33
math/rand.(*Rand).Int31(0xc42009a0f0, 0x4622e4)
	/usr/lib/go-1.10/src/math/rand/rand.go:96 +0x2b
math/rand.(*Rand).Int31n(0xc42009a0f0, 0xc400000003, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:131 +0x4f
math/rand.(*Rand).Intn(0xc42009a0f0, 0x3, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:169 +0x45
math/rand.Intn(0x3, 0x1cd1b3)
	/usr/lib/go-1.10/src/math/rand/rand.go:326 +0x37
invasion/world.(*City).RandomConn(0xc4200f3778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:133 +0xa0
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 38 [chan send]:
invasion/world.(*WorldMap).RemoveAlien(0xc42000a420, 0x5, 0x1, 0xc4200b00fe, 0x7, 0xc4200981e0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:238 +0xaf
invasion/world.(*WorldMap).RemoveRivals(0xc42000a420, 0xc4200aa230, 0x2, 0x2, 0xc4200b00d3, 0x7)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:221 +0x20a
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x3, 0xc4200b00d3, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:296 +0x318
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 40 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200d1778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x2, 0xc4200b00b2, 0x6, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 41 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200d1f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x2, 0xc4200b00b2, 0x6, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 42 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f4778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x2, 0xc4200b00b2, 0x6, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 43 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f4f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x3, 0xc4200b00d3, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 51 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f0778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x4, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 45 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f5778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 53 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f1778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x0, 0x0, 0x0, 0x0, 0x0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 54 [chan send (nil chan)]:
invasion/world.(*WorldMap).Move(0xc42000a420, 0x0, 0x0, 0x0, 0x0, 0x0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:277 +0x388
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 55 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f2778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x0, 0x0, 0x0, 0x0, 0x0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 56 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f2f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x4, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 44 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x4ec100)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f0f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 97 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x1)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc42011e778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x6, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 66 [semacquire]:
internal/poll.runtime_Semacquire(0xc4200aa05c)
	/usr/lib/go-1.10/src/runtime/sema.go:61 +0x39
internal/poll.(*fdMutex).rwlock(0xc4200aa050, 0x0, 0x7fc51b0e3ff0)
	/usr/lib/go-1.10/src/internal/poll/fd_mutex.go:152 +0xad
internal/poll.(*FD).writeLock(0xc4200aa050, 0x493dcf, 0xc4200e4040)
	/usr/lib/go-1.10/src/internal/poll/fd_mutex.go:237 +0x32
internal/poll.(*FD).Write(0xc4200aa050, 0xc42012a000, 0x54, 0x80, 0x0, 0x0, 0x0)
	/usr/lib/go-1.10/src/internal/poll/fd_unix.go:243 +0x46
os.(*File).write(0xc42000c018, 0xc42012a000, 0x54, 0x80, 0x4ec150, 0x76, 0x0)
	/usr/lib/go-1.10/src/os/file_unix.go:243 +0x4e
os.(*File).Write(0xc42000c018, 0xc42012a000, 0x54, 0x80, 0xc4200ee0c0, 0x0, 0xc4200d6000)
	/usr/lib/go-1.10/src/os/file.go:144 +0x6f
fmt.Fprintln(0x4ec320, 0xc42000c018, 0xc420156d00, 0x2, 0x2, 0x1, 0xc4200ee0c0, 0xc420122d28)
	/usr/lib/go-1.10/src/fmt/print.go:255 +0x8b
fmt.Println(0xc420122d00, 0x2, 0x2, 0xc420122d28, 0x42989e, 0x4e01f8)
	/usr/lib/go-1.10/src/fmt/print.go:264 +0x57
invasion/world.(*WorldMap).Move.func1()
	/home/sam/Programming/golang/src/invasion/world/world_map.go:253 +0x97
panic(0x4bca20, 0x4ec150)
	/usr/lib/go-1.10/src/runtime/panic.go:505 +0x229
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x4, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:304 +0x2aa
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 82 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x4ec100)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f5f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x7, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 47 [runnable]:
sync.(*Mutex).Unlock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:175 +0xd5
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:401 +0x64
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f6778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 81 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f7778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 99 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc42011f778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x6, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 101 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc420120778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x6, 0xc4200b00f6, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 103 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc420121778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x5, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 83 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).seedPos(0xc42000a060, 0x5af43c3c, 0xc42009a118)
	/usr/lib/go-1.10/src/math/rand/rand.go:398 +0x2d
math/rand.(*Rand).Seed(0xc42009a0f0, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:73 +0x5a
math/rand.Seed(0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:292 +0x37
invasion/world.(*City).RandomConn(0xc4200f7f78, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:130 +0x89
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x7, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135

goroutine 84 [semacquire]:
sync.runtime_SemacquireMutex(0xc42000a064, 0x0)
	/usr/lib/go-1.10/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc42000a060)
	/usr/lib/go-1.10/src/sync/mutex.go:134 +0x108
math/rand.(*lockedSource).Int63(0xc42000a060, 0x0)
	/usr/lib/go-1.10/src/math/rand/rand.go:377 +0x2d
math/rand.(*Rand).Int63(0xc42009a0f0, 0x0)
	/usr/lib/go-1.10/src/math/rand/rand.go:82 +0x33
math/rand.(*Rand).Int31(0xc42009a0f0, 0x4622e4)
	/usr/lib/go-1.10/src/math/rand/rand.go:96 +0x2b
math/rand.(*Rand).Int31n(0xc42009a0f0, 0xc400000003, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:131 +0x4f
math/rand.(*Rand).Intn(0xc42009a0f0, 0x3, 0x5af43c3c)
	/usr/lib/go-1.10/src/math/rand/rand.go:169 +0x45
math/rand.Intn(0x3, 0x1f809f)
	/usr/lib/go-1.10/src/math/rand/rand.go:326 +0x37
invasion/world.(*City).RandomConn(0xc420172778, 0xc42009a300)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:133 +0xa0
invasion/world.(*WorldMap).Move(0xc42000a420, 0x2, 0x7, 0xc4200b010b, 0x7, 0xc4200980c0)
	/home/sam/Programming/golang/src/invasion/world/world_map.go:271 +0x13a
created by invasion/world.(*Server).Handler
	/home/sam/Programming/golang/src/invasion/world/server.go:19 +0x135
